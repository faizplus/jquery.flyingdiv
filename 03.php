<!DOCTYPE HTML>
<html>
<head>
	<title>01 - JQuery Plugin Tutorials</title>
</head>
<style>
	
	.container{width:600px; padding:20px; margin:20px auto; }
	.row {
		margin:10px 0;
	}
	.row img{width:100%;}
	.img-wrap{padding:10px; background:#313140;margin:15px 0; color:#fff;text-align:center}
	.block {
		position: absolute;
		background-color: #abc;
		left: 50px;
		width: 90px;
		height: 90px;
		margin: 5px;
	}
	
	
	
</style>
<body>

<button id="start">Start</button>
<button id="start2">Start 2</button>

<div class="block"></div>

<div class="container">
<div class="row">
<!--	<div class="img-wrap animateto">
		<img src="images/1.jpg" alt="image 1" title="01 image" />
		<span class="caption"> 01 Image <span>
	</div> -->
	<img src="images/1.jpg" alt="image 1" title="01 image" />
	<img src="images/2.jpg" alt="image 2" title="02 image" />
	<img src="images/3.jpg" alt="image 3" title="03 image" />
	<img src="images/4.jpg" alt="image 4" title="04 image" />
</div>
</div>

<script src="js/jquery-2.1.4.min.js" ></script>
<script src="js/jquery.autoImageCaption.js" ></script>
<script>

	$(document).ready(function(){
		'use strict';
		$('.row img').autoImageCaption({
			wrapper:{'class':'img-wrap animateto'},
			// caption:{'tag':'figcaption'},
		});
		
		
		$('#start').click(function(){
			var anim = $('.animateto'),
				width1 = anim.outerWidth(),
				height1 = anim.outerHeight(),
				positon = anim.position()
			;
			$('.block').animate({opacity: 0.2,left:positon.left,top:positon.top, width:width1, height:height1}, 500);          
		});
		
		$('#start2').click(function(){
			var anim = $('.block'),
				width1 = anim.outerWidth(),
				height1 = anim.outerHeight(),
				positon = anim.position()
			;
			
			var delay=0
			
			$.each($('.animateto'), function( index, element ) {
			// $('.animateto').each(function(index,element){
				var curr = $(element),
					curr_width = curr.outerWidth(),
					curr_height = curr.outerHeight(),
					curr_positon = curr.position()
				;
				
				var newElement=$(element).clone();
				$(".row").prepend(newElement); //add the element 
				newElement.css({'position':'absolute','left':curr_positon.left,'top':curr_positon.top,width:curr_width, height:curr_height});
				//Now animate
				newElement.delay(delay).animate({opacity: 0,left:positon.left,top:positon.top, width:width1, height:height1}, 500);   
				 delay += 500;
			});
			
	
			/* $('.animateto')
			.css({'position':'absolute','left':curr_positon.left,'top':curr_positon.top,width:curr_width, height:curr_height})
			.animate({opacity: 0.2,left:positon.left,top:positon.top, width:width1, height:height1}, 500);           */
		});
		
		
		
	});
</script>
	
</body>
</html>
